
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Rekall Memory Forensic Framework</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Rekall Memory Forensic Framework">

    <link href="/css/bootstrap.min.css" rel="stylesheet">
    <link href="/css/rekall.css" rel="stylesheet">
    <link href="/css/asciidoc.css" rel="stylesheet">
    <link href="/css/font-awesome.css" rel="stylesheet">
    <script src="//code.jquery.com/jquery-1.11.0.min.js"></script>
    <script src="//code.jquery.com/ui/1.10.4/jquery-ui.js"></script>
    <script src="//netdna.bootstrapcdn.com/bootstrap/3.1.1/js/bootstrap.min.js"></script>
    <link rel="stylesheet" href="//code.jquery.com/ui/1.10.4/themes/smoothness/jquery-ui.css">

    <!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></sc\
ript>
    <![endif]-->
  </head>

  <body>


  <div class="background">
   <header class="header">
    <div class="navbar navbar-fixed-top navbar-inverse">
     <div class="navbar-inner">
      <div class="container">
       <a class="navbar-brand" href="/"
          style="padding-top: 0px; padding-bottom: 0px;"
          >
          <img src="/img/Rekall-small.png" class="small_logo"></img>
       </a>
       <ul class="nav navbar-nav navbar-collapse collapse">

        <li class="divider-vertical"></li>
        
    <li class="">
     <a href="/index.html">
      Home
     </a>
    </li>
    
        <li class="divider-vertical"></li>
        
    <li class="">
     <a href="/about.html">
      About
     </a>
    </li>
    
        <li class="divider-vertical"></li>
        
    <li class=" dropdown">
     <a class="dropdown-toggle"
      id="dropdownMenuReleases"
      data-toggle="dropdown"
      aria-expanded="true">
    Releases
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu" aria-labelledby="dropdownMenuReleases">

    <li role="presentation"><a role="menuitem" tabindex="-1" href="/Releases/releases-1.2.1.html">Version 1.2.1 Col de la Croix.</a></li>

    <li role="presentation"><a role="menuitem" tabindex="-1" href="/Releases/releases-1.3.1.html">Version 1.3.2 Dammastock.</a></li>

    <li role="presentation"><a role="menuitem" tabindex="-1" href="/Releases/releases-1.4.0.html">Version 1.4.0 Etzel.</a></li>

    <li role="presentation"><a role="menuitem" tabindex="-1" href="/Releases/releases-1.5.2.html">Version 1.5.2 Furka..</a></li>

  </ul>
 </li>

        <li class="divider-vertical"></li>
        
    <li class=" dropdown">
     <a class="dropdown-toggle"
      id="dropdownMenuDocumentation"
      data-toggle="dropdown"
      aria-expanded="true">
    Documentation
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu" aria-labelledby="dropdownMenuDocumentation">

    <li role="presentation"><a role="menuitem" tabindex="-1" href="/docs/Manual">Rekall User Manual</a></li>

    <li role="presentation"><a role="menuitem" tabindex="-1" href="/docs/Developers">Developer Documentation.</a></li>

    <li role="presentation"><a role="menuitem" tabindex="-1" href="/docs/GUI">Rekall GUI</a></li>

    <li role="presentation"><a role="menuitem" tabindex="-1" href="/docs/MemoryAnalysis.html">Memory Analysis Course</a></li>

    <li role="presentation"><a role="menuitem" tabindex="-1" href="/docs/References">References</a></li>

    <li role="presentation"><a role="menuitem" tabindex="-1" href="/docs/Tools">The Pmem Memory acquisition suite.</a></li>

    <li role="presentation"><a role="menuitem" tabindex="-1" href="/docs/index.html"></a></li>

  </ul>
 </li>

        <li class="divider-vertical"></li>
        
    <li class=" dropdown">
     <a class="dropdown-toggle"
      id="dropdownMenuDiscuss"
      data-toggle="dropdown"
      aria-expanded="true">
    Discuss
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu" aria-labelledby="dropdownMenuDiscuss">

    <li role="presentation"><a role="menuitem" tabindex="-1" href="/Discuss/blog.html">The Rekall Blog</a></li>

    <li role="presentation"><a role="menuitem" tabindex="-1" href="/Discuss/github.html">GitHub</a></li>

    <li role="presentation"><a role="menuitem" tabindex="-1" href="/Discuss/index.html"></a></li>

    <li role="presentation"><a role="menuitem" tabindex="-1" href="/Discuss/issue.html">Issue Tracker</a></li>

    <li role="presentation"><a role="menuitem" tabindex="-1" href="/Discuss/mailinglist.html">Mailing List</a></li>

  </ul>
 </li>

        <li class="divider-vertical"></li>
        
    <li class="">
     <a href="/faq.html">
      FAQ
     </a>
    </li>
    
       <li>
        <a href="https://github.com/google/rekall/edit/gh-pages/docs/Manual/Plugins/Attic/SetProcessContext.md?message=Describe%20your%20change..."
           data-toggle="tooltip"
           data-placement="bottom"
           title="Improve this page"
           class="improve-docs activate_tooltip">
         <i class="glyphicon glyphicon-edit"></i>
        </a>
       </ul>

       <form class="navbar-search col-md-3 docs-search" role="search"
             action="/search.html">
       <span class="glyphicon glyphicon-search search-icon"></span>
       <input type="text" name="q" data-i-search-input="true"
         class="search-query"
         placeholder="Site Search">
       </form>
      </div>
     </div>
    </div>
   </header>

<div class="container-fluid page-background container">
<div class="main">
  <div class="col-md-2">
    
<ul class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix rekall-side-nav">
 <a href="/docs/Manual/Plugins/index.html" class="btn btn-default btn-lg btn-block">
  <span class="glyphicon glyphicon-arrow-left"></span> Plugins
 </a>

 <a href='/docs/Manual/Plugins/Attic/index.html' class="btn btn-default btn-lg btn-block">
   Attic
 </a>
 <p>

<ul class='nav nav-pills nav-stacked'>
        <li classes=''>
          <a href='#analyze' class="category-link">
            analyze
          </a>
        </li>
        
        <li classes=''>
          <a href='#cc' class="category-link">
            cc
          </a>
        </li>
        
        <li classes='active'>
          <a href='#cc' class="category-link">
            cc
          </a>
        </li>
        
        <li classes=''>
          <a href='#cert_vad_scan' class="category-link">
            cert_vad_scan
          </a>
        </li>
        
        <li classes=''>
          <a href='#dead_procs' class="category-link">
            dead_procs
          </a>
        </li>
        
        <li classes=''>
          <a href='#describe' class="category-link">
            describe
          </a>
        </li>
        
        <li classes=''>
          <a href='#dtbscan2' class="category-link">
            dtbscan2
          </a>
        </li>
        
        <li classes=''>
          <a href='#eifconfig' class="category-link">
            eifconfig
          </a>
        </li>
        
        <li classes=''>
          <a href='#enetstat' class="category-link">
            enetstat
          </a>
        </li>
        
        <li classes=''>
          <a href='#events' class="category-link">
            events
          </a>
        </li>
        
        <li classes=''>
          <a href='#find' class="category-link">
            find
          </a>
        </li>
        
        <li classes=''>
          <a href='#find_kaslr' class="category-link">
            find_kaslr
          </a>
        </li>
        
        <li classes=''>
          <a href='#find_kernelslide' class="category-link">
            find_kernelslide
          </a>
        </li>
        
        <li classes=''>
          <a href='#hashdump' class="category-link">
            hashdump
          </a>
        </li>
        
        <li classes=''>
          <a href='#ifconfig' class="category-link">
            ifconfig
          </a>
        </li>
        
        <li classes=''>
          <a href='#ipnetstat' class="category-link">
            ipnetstat
          </a>
        </li>
        
        <li classes=''>
          <a href='#list_files' class="category-link">
            list_files
          </a>
        </li>
        
        <li classes=''>
          <a href='#list_terminals' class="category-link">
            list_terminals
          </a>
        </li>
        
        <li classes=''>
          <a href='#list_zones' class="category-link">
            list_zones
          </a>
        </li>
        
        <li classes=''>
          <a href='#lsadump' class="category-link">
            lsadump
          </a>
        </li>
        
        <li classes=''>
          <a href='#lsof' class="category-link">
            lsof
          </a>
        </li>
        
        <li classes=''>
          <a href='#notebook' class="category-link">
            notebook
          </a>
        </li>
        
        <li classes=''>
          <a href='#pslist' class="category-link">
            pslist
          </a>
        </li>
        
        <li classes=''>
          <a href='#pslist' class="category-link">
            pslist
          </a>
        </li>
        
        <li classes=''>
          <a href='#pslist' class="category-link">
            pslist
          </a>
        </li>
        
        <li classes=''>
          <a href='#pstree' class="category-link">
            pstree
          </a>
        </li>
        
        <li classes=''>
          <a href='#psxview' class="category-link">
            psxview
          </a>
        </li>
        
        <li classes=''>
          <a href='#pte' class="category-link">
            pte
          </a>
        </li>
        
        <li classes=''>
          <a href='#rekal' class="category-link">
            rekal
          </a>
        </li>
        
        <li classes=''>
          <a href='#render_sample' class="category-link">
            render_sample
          </a>
        </li>
        
        <li classes=''>
          <a href='#sessions' class="category-link">
            sessions
          </a>
        </li>
        
        <li classes=''>
          <a href='#sockets' class="category-link">
            sockets
          </a>
        </li>
        
        <li classes=''>
          <a href='#vadinfo' class="category-link">
            vadinfo
          </a>
        </li>
        
        <li classes=''>
          <a href='#vadtree' class="category-link">
            vadtree
          </a>
        </li>
        
        <li classes=''>
          <a href='#vadwalk' class="category-link">
            vadwalk
          </a>
        </li>
        
        <li classes=''>
          <a href='#webconsole' class="category-link">
            webconsole
          </a>
        </li>
        
        <li classes=''>
          <a href='#yarascan' class="category-link">
            yarascan
          </a>
        </li>
        
        <li classes=''>
          <a href='#zones' class="category-link">
            zones
          </a>
        </li>
        </ul></ul>
  </div>

  <div class="col-md-10">
    

<nav class="navbar navbar-default plugins" role="navigation">

  <ul class="nav navbar-nav navbar-left">
    <li class="active">
       <a href="/docs/Manual/Plugins/Attic/IRSetProcessContext.html">
         <span class="glyphicon glyphicon-arrow-left"></span>
         cc
       </a>
    </li>
  </ul>


  <ul class="nav navbar-nav navbar-right">
    <li class="active">
       <a href="/docs/Manual/Plugins/Attic/CertVadScan.html">
          cert_vad_scan
          <span class="glyphicon glyphicon-arrow-right"></span>
       </a>
    </li>
  </ul>

</nav>


<h1 id="#cc" class="anchor" >cc</h1>

<a class="btn btn-default epydoc_link"
   href="/epydocs/rekall.plugins.windows.misc.SetProcessContext-class.html">View Source</a>


<div class="abstract">
<h2>Set the current process context.</h2>
</div>



<p>One of Rekall&rsquo;s most powerfull features is the ability for the tool to resolve a
memory address back to a module or a symbol name which is known to exist at that
address. In order to perform this resolution, Rekall needs to be aware of the
virtual address layout (i.e. which dll or kernel module is mapped into which
region of the virtual address space).</p>
<p>However, the virtual address space has a different layout, for each process,
since processes have a unique page table. Therefore the same address in the
virtual address space may be resolved to different physical pages.</p>
<p>In order to correctly resolve the virtual address to a mapped dll, Rekall needs
to load the correct <code>process context</code>. Each process context:</p>
<ul>
<li>
<p>Has a unique address space - this is the address space of the process.</p>
</li>
<li>
<p>Has a unique vad - Rekall uses the vad to find out which dlls are mapped into
  which regions in the process&rsquo;s address space.</p>
</li>
<li>
<p>Each mapped PE executable has a unique export table. Rekall uses the export
  table to help resolve symbols when a profile is not found.</p>
</li>
</ul>
<p>This plugin can be used programmatically as a context manager:</p>
<div class="highlight"><pre><span></span>cc = session.plugins.cc()
with cc:
   cc.SetProcessContext(eprocess)

   print session.address_resolver.format_address(address)
</pre></div>


<p>The context manager ensures that the previous process context is restored.</p>
<h3>Notes</h3>
<ol>
<li>This plugin is used heavily within Rekall.  2. Process contexts are generally
   cached. This means that the first time an address resolution is required in a
   particular context, it might take slightly longer. Subsequent name
   resolutions should be quick as the context is cached.</li>
</ol>
<h3>Sample output</h3>
<p>This plugin has no visible effects, except that after running it, the session&rsquo;s
default address space is changed.</p>
<div class="highlight"><pre><span></span><span class="n">win7_trial_64bit</span><span class="p">.</span><span class="n">dmp</span><span class="p">.</span><span class="n">E01</span> <span class="mo">00</span><span class="o">:</span><span class="mi">08</span><span class="o">:</span><span class="mi">34</span><span class="o">&gt;</span> <span class="n">cc</span> <span class="mi">3060</span>
<span class="nl">DEBUG</span><span class="p">:</span><span class="nl">root</span><span class="p">:</span><span class="n">Switching</span> <span class="n">to</span> <span class="n">process</span> <span class="nl">context</span><span class="p">:</span> <span class="n">conhost</span><span class="p">.</span><span class="n">exe</span> <span class="p">(</span><span class="n">Pid</span> <span class="mi">3060</span><span class="mh">@0xfa8000bbd060</span><span class="p">)</span>
<span class="n">Switching</span> <span class="n">to</span> <span class="n">process</span> <span class="nl">context</span><span class="p">:</span> <span class="n">conhost</span><span class="p">.</span><span class="n">exe</span> <span class="p">(</span><span class="n">Pid</span> <span class="mi">3060</span><span class="mh">@0xfa8000bbd060</span><span class="p">)</span>
<span class="n">win7_trial_64bit</span><span class="p">.</span><span class="n">dmp</span><span class="p">.</span><span class="n">E01</span> <span class="mo">00</span><span class="o">:</span><span class="mi">08</span><span class="o">:</span><span class="mi">36</span><span class="o">&gt;</span> <span class="n">session</span><span class="p">.</span><span class="n">GetParameter</span><span class="p">(</span><span class="s">&quot;process_context&quot;</span><span class="p">)</span>
                           <span class="n">Out</span><span class="o">&lt;</span><span class="mi">30</span><span class="o">&gt;</span> <span class="p">[</span><span class="n">_EPROCESS</span> <span class="n">_EPROCESS</span><span class="p">]</span> <span class="p">@</span> <span class="mh">0xFA8000BBD060</span> <span class="p">(</span><span class="n">pid</span><span class="o">=</span><span class="mi">3060</span><span class="p">)</span>
<span class="n">win7_trial_64bit</span><span class="p">.</span><span class="n">dmp</span><span class="p">.</span><span class="n">E01</span> <span class="mo">00</span><span class="o">:</span><span class="mi">08</span><span class="o">:</span><span class="mi">38</span><span class="o">&gt;</span> <span class="n">session</span><span class="p">.</span><span class="n">GetParameter</span><span class="p">(</span><span class="s">&quot;default_address_space&quot;</span><span class="p">)</span>
                           <span class="n">Out</span><span class="o">&lt;</span><span class="mi">31</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="n">AMD64PagedMemory</span> <span class="p">@</span> <span class="mh">0x678321</span> <span class="n">Process</span> <span class="mi">3060</span><span class="o">&gt;</span>
</pre></div>

<p>

<nav class="navbar navbar-default plugins" role="navigation">

  <ul class="nav navbar-nav navbar-left">
    <li class="active">
       <a href="/docs/Manual/Plugins/Attic/IRSetProcessContext.html">
         <span class="glyphicon glyphicon-arrow-left"></span>
         cc
       </a>
    </li>
  </ul>


  <ul class="nav navbar-nav navbar-right">
    <li class="active">
       <a href="/docs/Manual/Plugins/Attic/CertVadScan.html">
          cert_vad_scan
          <span class="glyphicon glyphicon-arrow-right"></span>
       </a>
    </li>
  </ul>

</nav>


  </div>
</div>
</div>
  <div class="footer">
    <div class="container">
      <p class="text-muted">
        &copy; 2015 Google Inc.
        Rekall is licensed under the The GPL License.
        Pmem is licensed under the Apache license.
        <a href="#" class="pull-right text-muted">Back to top</a>
      </p>
    </div>
  </div>

  <script>
   $(".activate_tooltip").tooltip();
   $("body").scrollspy({
     target: ".bs-docs-sidebar",
     offset: 40
   });
  </script>
  </div>
 </body>
</html>

