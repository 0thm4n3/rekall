<html ng-app="manuskript.app">
  <head>
    <!-- third-party stylesheets -->
    <link rel="stylesheet" href="static/bower_components/bootstrap/dist/css/bootstrap.css">
    <link rel="stylesheet" href="static/bower_components/codemirror/lib/codemirror.css">

    <!-- internal stylesheets -->
    <link rel="stylesheet" href="static/index.css">

    <!-- third-party dependencies -->
    <script src="static/bower_components/jquery/dist/jquery.js"></script>
    <script src="static/bower_components/file-saver/FileSaver.js"></script>
    <script src="static/bower_components/ng-file-upload/angular-file-upload-shim.js"></script>
    <script src="static/bower_components/angular/angular.js"></script>
    <script src="static/bower_components/bootstrap/dist/js/bootstrap.js"></script>
    <script src="static/bower_components/markdown/lib/markdown.js"></script>
    <script src="static/bower_components/codemirror/lib/codemirror.js"></script>
    <script src="static/bower_components/codemirror/mode/python/python.js"></script>
    <script src="static/bower_components/codemirror/mode/markdown/markdown.js"></script>
    <script src="static/bower_components/codemirror/mode/xml/xml.js"></script>
    <script src="static/bower_components/angular-resource/angular-resource.js"></script>
    <script src="static/bower_components/angular-animate/angular-animate.js"></script>
    <script src="static/bower_components/angular-bootstrap/ui-bootstrap-tpls.js"></script>
    <script src="static/bower_components/angular-bindonce/bindonce.js"></script>
    <script src="static/bower_components/ng-file-upload/angular-file-upload.js"></script>

    <!-- internal dependencies -->
    <script src="static/components/core/addnode-dialog-controller.js"></script>
    <script src="static/components/core/codeeditor-directive.js"></script>
    <script src="static/components/core/core.js"></script>
    <script src="static/components/core/fastrepeat-directive.js"></script>
    <script src="static/components/core/fileinput-directive.js"></script>
    <script src="static/components/core/network-service.js"></script>
    <script src="static/components/core/nodepluginregistry-service.js"></script>
    <script src="static/components/core/onaltenter-directive.js"></script>
    <script src="static/components/core/scrollto-directive.js"></script>
    <script src="static/components/core/splitlist-directive.js"></script>

    <!-- manuskript-plugins -->

    <script src="static/load-controller.js"></script>
    <script src="static/app-controller.js"></script>
    <script src="static/app.js"></script>
  </head>
  <body ng-controller="ManuskriptAppController">

    <!-- Navigation bar -->
    <nav class="navbar navbar-default navbar-fixed-top" role="navigation" bindonce>
      <div class="navbar-header">
        <a class="navbar-brand" bo-text="pageTitle"></a>
      </div>
      <div class="container-fluid">
        <div class="btn-group right-padded">
          <button type="button" class="btn btn-default navbar-btn" ng-click="addNode()">
            <span class="glyphicon glyphicon-plus"></span> Add
          </button>
          <button type="button" class="btn btn-default navbar-btn dropdown-toggle" data-toggle="dropdown">
            <span class="caret" style="margin-top: 8px; margin-bottom: 8px"></span>
          </button>
          <ul class="dropdown-menu" role="menu">
            <li role="presentation" ng-class="selection.node == null && 'disabled'">
              <a role="menuitem" ng-click="addNodeBefore(selection.node)"
                 href="#">Insert Before Current</a>
            </li>
            <li role="presentation" ng-class="selection.node == null && 'disabled'">
              <a role="menuitem" ng-click="addNodeAfter(selection.node)"
                 href="#">Insert After Current</a>
            </li>
            <li role="presentation">
              <a role="menuitem" ng-click="addNode()" href="#">Append To The End</a>
            </li>
          </ul>
        </div>

        <div class="btn-group right-padded">
          <button type="button" class="btn btn-default"
                  ng-disabled="selection.node == null || selection.node.state == 'edit'"
                  ng-click="editNode(selection.node)">
            <span class="glyphicon glyphicon-edit"></span>
          </button>
          <button type="button"
                  ng-class="selection.node.state == 'edit' && 'btn btn-success' || 'btn btn-default'"
                  ng-disabled="selection.node.state != 'edit'"
                  ng-click="renderNode()">
            <span class="glyphicon glyphicon-ok"></span>
          </button>
        </div>

        <div class="btn-group right-padded">
          <button type="button" class="btn btn-default" ng-disabled="!canMoveNodeUp(selection.node)"
                  ng-click="moveNodeUp(selection.node)">
            <span class="glyphicon glyphicon-arrow-up"></span>
          </button>
          <button type="button" class="btn btn-default"
                  ng-disabled="!canMoveNodeDown(selection.node)"
                  ng-click="moveNodeDown(selection.node)">
            <span class="glyphicon glyphicon-arrow-down"></span>
          </button>
        </div>

        <div class="btn-group">
          <button type="button" class="btn btn-default"
                  ng-disabled="0 && selection.node == null"
                  ng-click="loadNodesFromServer()">
            <span class="glyphicon glyphicon-repeat"></span>
          </button>
          <button type="button" class="btn btn-default" ng-disabled="selection.node == null"
                  ng-click="removeNode(selection.node)">
            <span class="glyphicon glyphicon-trash"></span>
          </button>
        </div>
      </div>
    </nav>

    <!-- List of all the nodes. -->
    <div class="container-fluid" id="cells">
      <div class="col-md-2"></div>
      <div class="col-md-8" id="main">
        <div ng-repeat="node in nodes" ng-click="selection.node = node">

          <div ng-include="getIncludedFile(node)" ng-class="cellClass(node)">
          </div>

        </div>
      </div>
    </div>
  </body>
</html>
