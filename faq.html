
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Rekall Memory Forensic Framework</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Rekall Memory Forensic Framework">

    <link href="//netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap.css" rel="stylesheet">
    <style>
      body {
        padding-top: 60px;
      }
    </style>
    <link href="/css/rekall.css" rel="stylesheet">
    <link href="/css/asciidoc.css" rel="stylesheet">
    <link href="/css/treeview.css" rel="stylesheet">
    <script src="//code.jquery.com/jquery-1.11.0.min.js"></script>
    <script src="//code.jquery.com/ui/1.10.4/jquery-ui.js"></script>
    <script src="//netdna.bootstrapcdn.com/bootstrap/3.1.1/js/bootstrap.min.js"></script>
    <link rel="stylesheet" href="//code.jquery.com/ui/1.10.4/themes/smoothness/jquery-ui.css">

    <!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></sc\
ript>
    <![endif]-->
  </head>

  <body>



   <nav class="navbar navbar-inverse navbar-fixed-top"
     role="navigation">
     <div class="container-fluid">
       <div class="navbar-header">
         <a class="navbar-brand" href="#">Rekall Memory Forensic Framework</a>
       </div>

       <div class="navbar-collapse collapse">
         <ul class="nav navbar-nav">

        <li>
          <a class="" href="/index.html">
            Home
          </a>
        </li>

        <li>
          <a class="" href="/about.html">
            About
          </a>
        </li>

        <li>
          <a class="" href="/blog.html">
            Blog
          </a>
        </li>

        <li>
          <a class="" href="/docs.html">
            Documentation
          </a>
        </li>

        <li>
          <a class="" href="/downloads.html">
            Downloads
          </a>
        </li>

        <li>
          <a class="active" href="/faq.html">
            FAQ
          </a>
        </li>

         </ul>
         <form class="navbar-form navbar-right" role="search" action="/search.html">
           <div class="form-group">
             <input type="text" name="q" class="form-control" placeholder="Site Search">
           </div>
           <button type="submit" class="btn btn-default">
             <span class="glyphicon glyphicon-search"></span>
           </button>
         </form>
       </div> <!-- navbar-collapse -->
     </div> <!-- container-fluid -->
   </nav>

<div class="container-fluid">
<div class="row">
  <div class="col-md-2">
    
  </div>

  <div class="col-md-8">
    <h1>Frequently Asked Questions (FAQ).</h1>
<div id="repository"></div>

<h4>Rekall wants to access the internet for each profile, but my machine has no net access?</h4>
<p>Rekall&rsquo;s profile repository is rather large and grows all the time. We dont want
to ship Rekall with hundreds of MB of profile data embedded in the tool. We
therefore access the repository to fetch profiles on demand.</p>
<p>If you dont want to access the internet each time you can copy the entire
profile repository locally and then just use it from your local machine. Since
the profile repository is a git repository you can just check it out:</p>
<div class="highlight"><pre><span class="n">git</span> <span class="n">clone</span> <span class="n">https</span><span class="o">:</span><span class="c1">//github.com/google/rekall-profiles.git</span>
</pre></div>


<p>You can then just keep it up to date by running:</p>
<div class="highlight"><pre><span class="n">git</span> <span class="n">pull</span>
</pre></div>


<p>from within this directory. Alternatively you can just download the latest
snapshot as a zip file (you do not need the git tool in that case):</p>
<div class="highlight"><pre><span class="n">wget</span> <span class="n">https</span><span class="o">:</span><span class="c1">//github.com/google/rekall-profiles/archive/master.zip</span>
</pre></div>


<p>You will now need to edit your ~/.rekallrc file to use your local directory copy
instead of the web copy:</p>
<div class="highlight"><pre><span class="nl">profile_path:</span>
   <span class="o">-</span> <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">scudette</span><span class="o">/</span><span class="n">rekall</span><span class="o">-</span><span class="n">profiles</span>
   <span class="o">-</span> <span class="n">https</span><span class="o">:</span><span class="c1">//raw.githubusercontent.com/google/rekall-profiles/master</span>
</pre></div>


<div id="profile"></div>

<h4>Rekall fails with &ldquo;Unable to load profile from any repository&rdquo;. What gives?</h4>
<p>Rekall requires accurate profiles to operate. This is similar to the way the
windows kernel debugger works - in order to analyse a windows image, the kernel
debugger needs to obtain debugging symbols from the microsoft debugging server.</p>
<p>Since Rekall now uses indexes in its repository for autodetection you need to
reindex the profile repository after you add a new GUID. This is the preferred
way because Rekall will then be able to autodetect your profile afterwards:</p>
<ol>
<li>The first step is to figure out the precise version of the windows kernel
   this image has. We do this by scanning for the GUID of the <strong>ntoskrnl.exe</strong>
   process from the image itself.</li>
<li>Check out the profile repository as explained above.</li>
<li>Add you new GUID to v1.0/src/guids.txt</li>
<li>Now change directory to the v1.0/ directory.</li>
<li>Run the profile management tool:</li>
</ol>
<div class="highlight"><pre><span class="n">python</span> <span class="o">~/</span><span class="n">rekall</span><span class="o">/</span><span class="n">tools</span><span class="o">/</span><span class="n">profiles</span><span class="o">/</span><span class="n">build_profile_repo</span><span class="p">.</span><span class="n">py</span> <span class="n">src</span><span class="o">/</span><span class="n">guids</span><span class="p">.</span><span class="n">txt</span>
</pre></div>


<p>This will automatically notice the new GUIDs in the file, download them from
Microsoft, parse them and update all indexes. You can send us a pull request to
update the public repository if you like :-).</p>
<p>Alternatively you can just download the pdb file yourself and convert it. This
will work but you will have to provide the new profile through the &ndash;profile
command line arg.</p>
<p>To generate a profile file for an image, simple use the <strong>fetch_pdb</strong> and
<strong>parse_pdb</strong> plugins. For example, suppose you have a memory image which you
are not quite sure what exact version of Windows it is.</p>
<ol>
<li>
<p>The first step is to figure out the precise version of the windows kernel
   this image has. We do this by scanning for the GUID of the <strong>ntoskrnl.exe</strong>
   process from the image itself.</p>
</li>
<li>
<p>We then fetch the debugging symbols (pdb file) for this kernel from
   Microsoft&rsquo;s debug symbols.</p>
</li>
<li>
<p>Finally we convert the pdb file into Rekall&rsquo;s own json format.</p>
</li>
</ol>
<div class="highlight"><pre><span class="err">$</span> <span class="n">rekal</span> <span class="o">-</span><span class="n">f</span> <span class="o">~/</span><span class="n">images</span><span class="o">/</span><span class="n">win7</span><span class="p">.</span><span class="n">elf</span> <span class="n">version_scan</span> <span class="o">--</span><span class="n">name</span> <span class="n">ntkrnl</span>
<span class="mh">0x0000027bb5fc</span> <span class="n">f8e2a8b5c9b74bf4a6e4a48f180099942</span> <span class="n">ntkrnlmp</span><span class="p">.</span><span class="n">pdb</span>

<span class="err">$</span> <span class="n">rekal</span> <span class="n">fetch_pdb</span> <span class="o">--</span><span class="n">dump</span><span class="o">-</span><span class="n">dir</span> <span class="p">.</span> <span class="o">--</span><span class="n">pdb_filename</span> <span class="n">ntkrnlmp</span><span class="p">.</span><span class="n">pdb</span> <span class="o">--</span><span class="n">guid</span> <span class="n">f8e2a8b5c9b74bf4a6e4a48f180099942</span>
<span class="n">Trying</span> <span class="n">to</span> <span class="n">fetch</span> <span class="n">http</span><span class="o">:</span><span class="c1">//msdl.microsoft.com/download/symbols/ntkrnlmp.pdb/F8E2A8B5C9B74BF4A6E4A48F180099942/ntkrnlmp.pd_</span>
<span class="n">Received</span> <span class="mi">2675077</span> <span class="n">bytes</span>
<span class="n">Extracting</span> <span class="n">cabinet</span><span class="o">:</span> <span class="p">.</span><span class="o">/</span><span class="n">ntkrnlmp</span><span class="p">.</span><span class="n">pd_</span>
 <span class="n">extracting</span> <span class="n">ntkrnlmp</span><span class="p">.</span><span class="n">pdb</span>

<span class="n">All</span> <span class="n">done</span><span class="p">,</span> <span class="n">no</span> <span class="n">errors</span><span class="p">.</span>

<span class="err">$</span> <span class="n">rekal</span> <span class="n">parse_pdb</span> <span class="o">-</span><span class="n">f</span> <span class="n">ntkrnlmp</span><span class="p">.</span><span class="n">pdb</span> <span class="o">--</span><span class="n">output</span> <span class="n">ntkrnlmp</span><span class="p">.</span><span class="n">json</span> <span class="o">--</span><span class="n">profile_class</span> <span class="n">Win7x64</span>
<span class="err">$</span> <span class="n">rekal</span> <span class="o">--</span><span class="n">profile</span> <span class="p">.</span><span class="o">/</span><span class="n">ntkrnlmp</span><span class="p">.</span><span class="n">json</span> <span class="o">-</span><span class="n">f</span> <span class="o">~/</span><span class="n">images</span><span class="o">/</span><span class="n">win7</span><span class="p">.</span><span class="n">elf</span> <span class="n">pslist</span>
 <span class="n">Offset</span> <span class="p">(</span><span class="n">V</span><span class="p">)</span>   <span class="n">Name</span>                    <span class="n">PID</span>   <span class="n">PPID</span>   <span class="n">Thds</span>     <span class="n">Hnds</span>   <span class="n">Sess</span>  <span class="n">Wow64</span> <span class="n">Start</span>                    <span class="n">Exit</span>
<span class="o">--------------</span> <span class="o">--------------------</span> <span class="o">------</span> <span class="o">------</span> <span class="o">------</span> <span class="o">--------</span> <span class="o">------</span> <span class="o">------</span> <span class="o">------------------------</span> <span class="o">------------------------</span>
<span class="mh">0xfa80008959e0</span> <span class="n">System</span>                    <span class="mi">4</span>      <span class="mi">0</span>     <span class="mi">84</span>      <span class="mi">511</span> <span class="o">------</span>  <span class="n">False</span> <span class="mi">2012</span><span class="o">-</span><span class="mi">10</span><span class="o">-</span><span class="mo">01</span> <span class="mi">21</span><span class="o">:</span><span class="mi">39</span><span class="o">:</span><span class="mi">51</span><span class="o">+</span><span class="mo">0000</span> <span class="o">-</span>
<span class="mh">0xfa8001994310</span> <span class="n">smss</span><span class="p">.</span><span class="n">exe</span>                <span class="mi">272</span>      <span class="mi">4</span>      <span class="mi">2</span>       <span class="mi">29</span> <span class="o">------</span>  <span class="n">False</span> <span class="mi">2012</span><span class="o">-</span><span class="mi">10</span><span class="o">-</span><span class="mo">01</span> <span class="mi">21</span><span class="o">:</span><span class="mi">39</span><span class="o">:</span><span class="mi">51</span><span class="o">+</span><span class="mo">0000</span> <span class="o">-</span>
<span class="mh">0xfa8002259060</span> <span class="n">csrss</span><span class="p">.</span><span class="n">exe</span>               <span class="mi">348</span>    <span class="mi">340</span>      <span class="mi">9</span>      <span class="mi">436</span>      <span class="mi">0</span>  <span class="n">False</span> <span class="mi">2012</span><span class="o">-</span><span class="mi">10</span><span class="o">-</span><span class="mo">01</span> <span class="mi">21</span><span class="o">:</span><span class="mi">39</span><span class="o">:</span><span class="mi">57</span><span class="o">+</span><span class="mo">0000</span> <span class="o">-</span>
<span class="mh">0xfa8000901060</span> <span class="n">wininit</span><span class="p">.</span><span class="n">exe</span>             <span class="mi">384</span>    <span class="mi">340</span>      <span class="mi">3</span>       <span class="mi">75</span>      <span class="mi">0</span>  <span class="n">False</span> <span class="mi">2012</span><span class="o">-</span><span class="mi">10</span><span class="o">-</span><span class="mo">01</span> <span class="mi">21</span><span class="o">:</span><span class="mi">39</span><span class="o">:</span><span class="mi">57</span><span class="o">+</span><span class="mo">0000</span> <span class="o">-</span>
<span class="mh">0xfa8000900420</span> <span class="n">csrss</span><span class="p">.</span><span class="n">exe</span>               <span class="mi">396</span>    <span class="mi">376</span>      <span class="mi">8</span>      <span class="mi">192</span>      <span class="mi">1</span>  <span class="n">False</span> <span class="mi">2012</span><span class="o">-</span><span class="mi">10</span><span class="o">-</span><span class="mo">01</span> <span class="mi">21</span><span class="o">:</span><span class="mi">39</span><span class="o">:</span><span class="mi">57</span><span class="o">+</span><span class="mo">0000</span> <span class="o">-</span>
<span class="p">....</span>
</pre></div>


<p>The same technique can be used to generate symbols for other profiles which
might be needed - for example <strong>tcpip.pdb</strong> or <strong>win32k.pdb</strong>.</p>
  </div>
  <div class="col-md-2 sidebar">
    <img src="/img/Rekall.png" class="logo"></img>


  </div>
</div>
</div>
  <script>
   $(".activate_tooltip").tooltip();
  </script>
  </body>
</html>

